
*** src/simd.rs:20:5: replace dot -> f32 with 0.0

*** mutation diff:
--- src/simd.rs
+++ replace dot -> f32 with 0.0
@@ -12,32 +12,17 @@
 
 /// Dot product of two vectors.
 ///
 /// If vectors have different lengths, uses the shorter length.
 /// Returns 0.0 for empty vectors.
 #[inline]
 #[must_use]
 pub fn dot(a: &[f32], b: &[f32]) -> f32 {
-    #[cfg(target_arch = "x86_64")]
-    {
-        if is_x86_feature_detected!("avx2") && is_x86_feature_detected!("fma") {
-            // SAFETY: We've verified AVX2 and FMA are available via runtime detection.
-            // The function handles mismatched lengths by using min(a.len(), b.len()).
-            return unsafe { dot_avx2(a, b) };
-        }
-    }
-    #[cfg(target_arch = "aarch64")]
-    {
-        // SAFETY: NEON is always available on aarch64.
-        // The function handles mismatched lengths by using min(a.len(), b.len()).
-        return unsafe { dot_neon(a, b) };
-    }
-    #[allow(unreachable_code)]
-    dot_portable(a, b)
+    0.0 /* ~ changed by cargo-mutants ~ */
 }
 
 /// L2 norm of a vector.
 #[inline]
 #[must_use]
 pub fn norm(v: &[f32]) -> f32 {
     dot(v, v).sqrt()
 }


*** /opt/homebrew/bin/cargo test --no-run --verbose --package=rank-refine@0.7.9
       Fresh unicode-ident v1.0.22
       Fresh proc-macro2 v1.0.103
       Fresh libc v0.2.177
       Fresh quote v1.0.42
       Fresh syn v2.0.111
       Fresh cfg-if v1.0.4
       Fresh zerocopy-derive v0.8.30
       Fresh zerocopy v0.8.30
       Fresh getrandom v0.3.4
       Fresh autocfg v1.5.0
       Fresh serde_core v1.0.228
       Fresh crossbeam-utils v0.8.21
       Fresh crossbeam-epoch v0.9.18
       Fresh rand_core v0.9.3
       Fresh serde_derive v1.0.228
       Fresh errno v0.3.14
       Fresh regex-syntax v0.8.8
       Fresh bitflags v2.10.0
       Fresh once_cell v1.21.3
       Fresh either v1.15.0
       Fresh rustix v1.1.2
       Fresh serde v1.0.228
       Fresh num-traits v0.2.19
       Fresh crossbeam-deque v0.8.6
       Fresh half v2.7.1
       Fresh memchr v2.7.6
       Fresh itoa v1.0.15
       Fresh plotters-backend v0.3.7
       Fresh fastrand v2.3.0
       Fresh ryu v1.0.20
       Fresh anstyle v1.0.13
       Fresh clap_lex v0.7.6
       Fresh ciborium-io v0.2.2
       Fresh tempfile v3.23.0
       Fresh rayon-core v1.13.0
       Fresh itertools v0.10.5
       Fresh plotters-svg v0.3.7
       Fresh serde_json v1.0.145
       Fresh clap_builder v4.5.53
       Fresh regex-automata v0.4.13
       Fresh ppv-lite86 v0.2.21
       Fresh wait-timeout v0.2.1
       Fresh fnv v1.0.7
       Fresh same-file v1.0.6
       Fresh bit-vec v0.8.0
       Fresh cast v0.3.0
       Fresh quick-error v1.2.3
       Fresh rand_xorshift v0.4.0
       Fresh ciborium-ll v0.2.2
       Fresh regex v1.12.2
       Fresh rayon v1.11.0
       Fresh rand_chacha v0.9.0
       Fresh tinytemplate v1.2.1
       Fresh walkdir v2.5.0
       Fresh plotters v0.3.7
       Fresh clap v4.5.53
       Fresh bit-set v0.8.0
       Fresh criterion-plot v0.5.0
       Fresh rusty-fork v0.3.1
       Fresh rand v0.9.2
       Fresh is-terminal v0.4.17
       Fresh oorandom v11.1.5
       Fresh unarray v0.1.4
       Fresh anes v0.1.6
       Fresh ciborium v0.2.2
       Fresh proptest v1.9.0
       Dirty rank-refine v0.7.9 (/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp): the file `src/simd.rs` has changed (1764195576.917470494s, 3s after last build at 1764195573.336831387s)
   Compiling rank-refine v0.7.9 (/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp)
       Fresh criterion v0.5.1
     Running `rustc --crate-name rank_refine --edition=2021 src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 -C split-debuginfo=unpacked --cfg 'feature="default"' --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("default", "hierarchical", "kodama"))' -C metadata=a9145a0b8e512428 -C extra-filename=-a97128c91e1742ac --out-dir /private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps -C incremental=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/incremental -L dependency=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps`
     Running `rustc --crate-name rank_refine --edition=2021 src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --emit=dep-info,link -C embed-bitcode=no -C debuginfo=2 -C split-debuginfo=unpacked --test --cfg 'feature="default"' --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("default", "hierarchical", "kodama"))' -C metadata=d60e10c1e4de765d -C extra-filename=-66be09a2c0c6ed5c --out-dir /private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps -C incremental=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/incremental -L dependency=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps --extern criterion=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/libcriterion-a8d57b2e80b47536.rlib --extern proptest=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/libproptest-0cbeba200425c4c9.rlib`
warning: unused variable: `a`
  --> src/simd.rs:19:12
   |
19 | pub fn dot(a: &[f32], b: &[f32]) -> f32 {
   |            ^ help: if this is intentional, prefix it with an underscore: `_a`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `b`
  --> src/simd.rs:19:23
   |
19 | pub fn dot(a: &[f32], b: &[f32]) -> f32 {
   |                       ^ help: if this is intentional, prefix it with an underscore: `_b`

warning: function `dot_portable` is never used
   --> src/simd.rs:128:15
    |
128 | pub(crate) fn dot_portable(a: &[f32], b: &[f32]) -> f32 {
    |               ^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: function `dot_neon` is never used
   --> src/simd.rs:190:11
    |
190 | unsafe fn dot_neon(a: &[f32], b: &[f32]) -> f32 {
    |           ^^^^^^^^

warning: `rank-refine` (lib) generated 4 warnings
     Running `rustc --crate-name integration --edition=2021 tests/integration.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --emit=dep-info,link -C embed-bitcode=no -C debuginfo=2 -C split-debuginfo=unpacked --test --cfg 'feature="default"' --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("default", "hierarchical", "kodama"))' -C metadata=a03cf60aa831c0ef -C extra-filename=-29047e3116c2525f --out-dir /private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps -C incremental=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/incremental -L dependency=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps --extern criterion=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/libcriterion-a8d57b2e80b47536.rlib --extern proptest=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/libproptest-0cbeba200425c4c9.rlib --extern rank_refine=/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/librank_refine-a97128c91e1742ac.rlib`
warning: function `dot_neon` is never used
   --> src/simd.rs:190:11
    |
190 | unsafe fn dot_neon(a: &[f32], b: &[f32]) -> f32 {
    |           ^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: `rank-refine` (lib test) generated 3 warnings (2 duplicates)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.04s
  Executable `/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/rank_refine-66be09a2c0c6ed5c`
  Executable `/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/integration-29047e3116c2525f`

*** result: Success

*** /opt/homebrew/bin/cargo test --verbose --package=rank-refine@0.7.9
       Fresh unicode-ident v1.0.22
       Fresh cfg-if v1.0.4
       Fresh autocfg v1.5.0
       Fresh either v1.15.0
       Fresh bitflags v2.10.0
       Fresh once_cell v1.21.3
       Fresh regex-syntax v0.8.8
       Fresh proc-macro2 v1.0.103
       Fresh itoa v1.0.15
       Fresh anstyle v1.0.13
       Fresh plotters-backend v0.3.7
       Fresh ryu v1.0.20
       Fresh ciborium-io v0.2.2
       Fresh quote v1.0.42
       Fresh libc v0.2.177
       Fresh serde_core v1.0.228
       Fresh crossbeam-utils v0.8.21
       Fresh fastrand v2.3.0
       Fresh clap_lex v0.7.6
       Fresh memchr v2.7.6
       Fresh plotters-svg v0.3.7
       Fresh itertools v0.10.5
       Fresh regex-automata v0.4.13
       Fresh fnv v1.0.7
       Fresh quick-error v1.2.3
       Fresh cast v0.3.0
       Fresh same-file v1.0.6
       Fresh bit-vec v0.8.0
       Fresh syn v2.0.111
       Fresh getrandom v0.3.4
       Fresh crossbeam-epoch v0.9.18
       Fresh errno v0.3.14
       Fresh num-traits v0.2.19
       Fresh serde_json v1.0.145
       Fresh clap_builder v4.5.53
       Fresh wait-timeout v0.2.1
       Fresh is-terminal v0.4.17
       Fresh criterion-plot v0.5.0
       Fresh walkdir v2.5.0
       Fresh bit-set v0.8.0
       Fresh regex v1.12.2
       Fresh anes v0.1.6
       Fresh oorandom v11.1.5
       Fresh unarray v0.1.4
warning: unused variable: `a`
  --> src/simd.rs:19:12
   |
19 | pub fn dot(a: &[f32], b: &[f32]) -> f32 {
   |            ^ help: if this is intentional, prefix it with an underscore: `_a`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `b`
  --> src/simd.rs:19:23
   |
19 | pub fn dot(a: &[f32], b: &[f32]) -> f32 {
   |                       ^ help: if this is intentional, prefix it with an underscore: `_b`

warning: function `dot_portable` is never used
   --> src/simd.rs:128:15
    |
128 | pub(crate) fn dot_portable(a: &[f32], b: &[f32]) -> f32 {
    |               ^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: function `dot_neon` is never used
   --> src/simd.rs:190:11
    |
190 | unsafe fn dot_neon(a: &[f32], b: &[f32]) -> f32 {
    |           ^^^^^^^^

warning: `rank-refine` (lib) generated 4 warnings
       Fresh zerocopy-derive v0.8.30
       Fresh rand_core v0.9.3
       Fresh serde_derive v1.0.228
       Fresh rustix v1.1.2
       Fresh crossbeam-deque v0.8.6
       Fresh clap v4.5.53
       Fresh plotters v0.3.7
       Fresh zerocopy v0.8.30
       Fresh serde v1.0.228
       Fresh rayon-core v1.13.0
       Fresh tempfile v3.23.0
       Fresh rand_xorshift v0.4.0
       Fresh rand v0.9.2
       Fresh half v2.7.1
       Fresh ppv-lite86 v0.2.21
       Fresh rayon v1.11.0
       Fresh tinytemplate v1.2.1
       Fresh rusty-fork v0.3.1
       Fresh ciborium-ll v0.2.2
       Fresh rand_chacha v0.9.0
       Fresh ciborium v0.2.2
       Fresh proptest v1.9.0
       Fresh criterion v0.5.1
warning: function `dot_neon` is never used
   --> src/simd.rs:190:11
    |
190 | unsafe fn dot_neon(a: &[f32], b: &[f32]) -> f32 {
    |           ^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

       Fresh rank-refine v0.7.9 (/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp)
warning: `rank-refine` (lib test) generated 3 warnings (2 duplicates)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.04s
     Running `/private/var/folders/dt/jq9nqy8x2wd65h22qb9rptjr0000gn/T/cargo-mutants-rank-refine-DHUa65.tmp/target/debug/deps/rank_refine-66be09a2c0c6ed5c`

running 124 tests
test colbert::proptests::pooling_idempotent_at_target ... FAILED
test colbert::proptests::duplicate_tokens_cluster ... FAILED
test colbert::proptests::pool_preserves_vector_mass ... FAILED
test colbert::proptests::empty_tokens_all_methods ... ok
test colbert::proptests::maxsim_not_commutative ... ok
test colbert::proptests::more_doc_tokens_higher_score ... ok
test colbert::proptests::pool_factor_one_identity ... ok
test colbert::proptests::rank_preserves_doc_count ... ok
test colbert::proptests::protected_tokens_preserved ... ok
test colbert::proptests::adaptive_uses_sequential_for_high_factors ... ok
test colbert::proptests::maxsim_pooled_finite ... ok
test colbert::proptests::refine_alpha_one_preserves_order ... ok
test colbert::tests::test_maxsim_with_pooled_tokens ... FAILED
test colbert::tests::test_nan_score_handling ... ok
test colbert::tests::test_pool_tokens_adaptive_empty ... ok
test colbert::tests::test_pool_tokens_adaptive_factor_one ... ok
test colbert::tests::test_pool_tokens_adaptive_high_factor ... ok
test colbert::tests::test_pool_tokens_adaptive_low_factor ... ok
test colbert::tests::test_pool_tokens_empty ... ok
test colbert::tests::test_pool_tokens_factor_one ... ok
test colbert::tests::test_pool_tokens_sequential ... ok
test colbert::tests::test_pool_tokens_reduces_count ... ok
test colbert::tests::test_pool_tokens_with_protected ... ok
test colbert::tests::test_rank ... ok
test colbert::tests::test_pooling_methods_produce_same_dimensions ... ok
test colbert::tests::test_rank_empty_docs ... ok
test colbert::tests::test_rank_empty_query ... ok
test colbert::tests::test_rank_with_top_k ... ok
test colbert::tests::test_refine ... ok
test colbert::tests::test_refine_missing_doc ... ok
test colbert::tests::test_refine_with_config_top_k ... ok
test colbert::proptests::sequential_pool_exact_count ... ok
test crossencoder::tests::test_nan_score_handling ... ok
test crossencoder::tests::test_refine ... ok
test crossencoder::tests::test_refine_empty ... ok
test crossencoder::tests::test_refine_single_candidate ... ok
test crossencoder::tests::test_rerank ... ok
test crossencoder::tests::test_rerank_empty ... ok
test colbert::proptests::rank_sorted_descending ... ok
test colbert::proptests::single_token_unchanged ... ok
test colbert::proptests::refine_output_bounded ... ok
test colbert::proptests::sequential_pool_preserves_dimension ... ok
test crossencoder::proptests::alpha_one_preserves_original_order ... ok
test crossencoder::proptests::refine_scores_bounded ... ok
test colbert::proptests::pool_preserves_dimension ... ok
test crossencoder::proptests::rerank_preserves_count ... ok
test matryoshka::tests::test_head_dims_too_large - should panic ... ok
test matryoshka::tests::test_missing_candidate ... ok
test matryoshka::tests::test_nan_score_handling ... ok
test matryoshka::tests::test_refinement ... FAILED
test matryoshka::tests::test_refinement_with_alpha ... FAILED
test matryoshka::tests::test_short_doc_embedding ... ok
test matryoshka::tests::test_top_k ... ok
test matryoshka::tests::test_try_refine_error ... ok
test matryoshka::proptests::alpha_interpolation ... ok
test crossencoder::proptests::refine_preserves_count ... ok
test matryoshka::proptests::output_bounded_by_candidates ... ok
test matryoshka::proptests::config_top_k_limits_output ... ok
test matryoshka::proptests::alpha_one_preserves_order ... ok
test matryoshka::proptests::results_sorted_descending ... ok
test matryoshka::proptests::smaller_head_uses_more_dims ... ok
test scoring::proptests::blend_alpha_zero ... ok
test matryoshka::proptests::try_refine_validates_head_dims ... ok
test scoring::proptests::blend_alpha_one ... ok
test scoring::proptests::blend_is_linear ... ok
test matryoshka::proptests::short_docs_filtered ... ok
test scoring::proptests::late_interaction_empty_doc ... ok
test scoring::proptests::late_interaction_nonnegative ... ok
test scoring::proptests::normalize_preserves_order ... ok
test scoring::proptests::pooler_empty_input ... ok
test scoring::proptests::normalize_bounded ... ok
test scoring::proptests::pooler_factor_one_identity ... ok
test scoring::tests::test_blend ... ok
test scoring::tests::test_dense_cosine ... FAILED
test scoring::tests::test_dense_dot ... FAILED
test scoring::tests::test_dense_rank ... FAILED
test scoring::tests::test_late_interaction_maxsim ... FAILED
test scoring::proptests::scorer_cosine_bounded_normalized ... ok
test scoring::tests::test_normalize_scores_empty ... ok
test scoring::tests::test_normalize_scores ... ok
test scoring::tests::test_normalize_scores_equal ... ok
test scoring::tests::test_token_scorer_rank_vecs ... FAILED
test scoring::tests::test_token_scorer_score_vecs ... FAILED
test scoring::proptests::scorer_rank_is_sorted ... ok
test scoring::proptests::scorer_rank_preserves_count ... ok
test scoring::proptests::token_scorer_rank_preserves_count ... ok
test colbert::proptests::adaptive_uses_clustering_for_low_factors ... ok
test scoring::proptests::token_scorer_rank_is_sorted ... ok
test colbert::proptests::pool_maintains_score_quality ... ok
test simd::proptests::dot_simd_matches_portable ... FAILED
test simd::proptests::maxsim_cosine_bounded_by_query_count ... ok
test simd::proptests::dot_bilinear ... ok
test scoring::proptests::scorer_cosine_commutative ... ok
test simd::proptests::dot_self_is_squared_norm ... ok
test scoring::proptests::scorer_dot_commutative ... ok
test simd::proptests::maxsim_empty_returns_zero ... ok
test simd::tests::test_cosine_basic ... FAILED
test simd::tests::test_cosine_zero_norm ... ok
test simd::tests::test_dot_basic ... FAILED
test simd::proptests::cauchy_schwarz ... ok
test simd::tests::test_dot_empty ... ok
test simd::tests::test_dot_mismatched_lengths ... FAILED
test simd::tests::test_dot_simd_vs_portable ... FAILED
test simd::tests::test_maxsim_basic ... FAILED
test simd::tests::test_maxsim_cosine_basic ... FAILED
test simd::tests::test_maxsim_cosine_empty_doc ... ok
test simd::tests::test_maxsim_empty_doc ... ok
test simd::tests::test_maxsim_cosine_vecs ... FAILED
test simd::tests::test_maxsim_empty_query ... ok
test simd::tests::test_maxsim_vecs ... FAILED
test simd::proptests::maxsim_scales_with_query_count ... ok
test simd::proptests::cosine_commutative ... ok
test simd::proptests::cosine_bounded ... ok
test simd::proptests::norm_scaling ... ok
test colbert::proptests::pool_reduces_count ... ok
test scoring::proptests::pooler_never_increases_count ... ok
test scoring::proptests::pooler_preserves_dimension ... ok
test crossencoder::proptests::rerank_sorted_descending ... ok
test colbert::proptests::pooling_never_increases_count ... ok
test simd::proptests::norm_nonnegative ... ok
test simd::proptests::maxsim_nonnegative_inputs ... ok
test simd::proptests::dot_commutative ... ok
test colbert::proptests::all_pooling_methods_preserve_dim ... ok
test simd::proptests::cosine_self_is_one ... FAILED

failures:

---- colbert::proptests::pooling_idempotent_at_target stdout ----

thread 'colbert::proptests::pooling_idempotent_at_target' (12499908) panicked at src/colbert.rs:710:5:
Test failed: Pool not idempotent: similarity = 0 at src/colbert.rs:1028.
minimal failing input: dim = 4
	successes: 0
	local rejects: 0
	global rejects: 0

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- colbert::proptests::duplicate_tokens_cluster stdout ----

thread 'colbert::proptests::duplicate_tokens_cluster' (12499897) panicked at src/colbert.rs:710:5:
Test failed: Duplicate tokens didn't cluster well: max_sim = 0 at src/colbert.rs:949.
minimal failing input: dim = 4
	successes: 0
	local rejects: 0
	global rejects: 0


---- colbert::proptests::pool_preserves_vector_mass stdout ----

thread 'colbert::proptests::pool_preserves_vector_mass' (12499906) panicked at src/colbert.rs:710:5:
Test failed: Pooled vectors should have positive norm at src/colbert.rs:914.
minimal failing input: n_tokens = 4, dim = 4
	successes: 0
	local rejects: 0
	global rejects: 0


---- colbert::tests::test_maxsim_with_pooled_tokens stdout ----

thread 'colbert::tests::test_maxsim_with_pooled_tokens' (12499921) panicked at src/colbert.rs:695:9:
assertion failed: score_pooled > 0.0

---- matryoshka::tests::test_refinement stdout ----

thread 'matryoshka::tests::test_refinement' (12499962) panicked at src/matryoshka.rs:170:9:
assertion `left == right` failed
  left: "d1"
 right: "d2"

---- matryoshka::tests::test_refinement_with_alpha stdout ----

thread 'matryoshka::tests::test_refinement_with_alpha' (12499963) panicked at src/matryoshka.rs:186:9:
assertion `left == right` failed
  left: "d1"
 right: "d2"

---- scoring::tests::test_dense_cosine stdout ----

thread 'scoring::tests::test_dense_cosine' (12499986) panicked at src/scoring.rs:258:9:
assertion failed: (scorer.score(&[2.0, 0.0], &[1.0, 0.0]) - 1.0).abs() < 1e-5

---- scoring::tests::test_dense_dot stdout ----

thread 'scoring::tests::test_dense_dot' (12499987) panicked at src/scoring.rs:251:9:
assertion failed: (scorer.score(&[1.0, 0.0], &[1.0, 0.0]) - 1.0).abs() < 1e-5

---- scoring::tests::test_dense_rank stdout ----

thread 'scoring::tests::test_dense_rank' (12499988) panicked at src/scoring.rs:269:9:
assertion `left == right` failed
  left: "d1"
 right: "d2"

---- scoring::tests::test_late_interaction_maxsim stdout ----

thread 'scoring::tests::test_late_interaction_maxsim' (12499989) panicked at src/scoring.rs:283:9:
assertion failed: (scorer.score_tokens(&query, &doc) - 1.0).abs() < 1e-5

---- scoring::tests::test_token_scorer_rank_vecs stdout ----

thread 'scoring::tests::test_token_scorer_rank_vecs' (12499993) panicked at src/scoring.rs:336:9:
assertion `left == right` failed
  left: "d1"
 right: "d2"

---- scoring::tests::test_token_scorer_score_vecs stdout ----

thread 'scoring::tests::test_token_scorer_score_vecs' (12499994) panicked at src/scoring.rs:323:9:
assertion failed: score > 1.5

---- simd::proptests::dot_simd_matches_portable stdout ----

thread 'simd::proptests::dot_simd_matches_portable' (12500002) panicked at src/simd.rs:369:5:
Test failed: SIMD 0 != portable 6.6301875 at src/simd.rs:375.
minimal failing input: a = [
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    1.411995,
], b = [
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    0.0,
    4.6956167,
]
	successes: 0
	local rejects: 0
	global rejects: 0


---- simd::tests::test_cosine_basic stdout ----

thread 'simd::tests::test_cosine_basic' (12500012) panicked at src/simd.rs:280:9:
assertion failed: (cosine(&[1.0, 0.0], &[1.0, 0.0]) - 1.0).abs() < 1e-5

---- simd::tests::test_dot_basic stdout ----

thread 'simd::tests::test_dot_basic' (12500014) panicked at src/simd.rs:237:9:
assertion failed: (dot(&[1.0, 2.0], &[3.0, 4.0]) - 11.0).abs() < 1e-5

---- simd::tests::test_dot_mismatched_lengths stdout ----

thread 'simd::tests::test_dot_mismatched_lengths' (12500016) panicked at src/simd.rs:250:9:
assertion failed: (dot(&[1.0, 2.0, 3.0], &[4.0, 5.0]) - 14.0).abs() < 1e-5

---- simd::tests::test_dot_simd_vs_portable stdout ----

thread 'simd::tests::test_dot_simd_vs_portable' (12500017) panicked at src/simd.rs:267:13:
Mismatch at len=3: portable=0.4, simd=0, diff=0.4

---- simd::tests::test_maxsim_basic stdout ----

thread 'simd::tests::test_maxsim_basic' (12500018) panicked at src/simd.rs:302:9:
assertion failed: (maxsim(&query, &doc) - 2.0).abs() < 1e-5

---- simd::tests::test_maxsim_cosine_basic stdout ----

thread 'simd::tests::test_maxsim_cosine_basic' (12500019) panicked at src/simd.rs:345:9:
assertion failed: (maxsim_cosine(&query, &doc) - 1.0).abs() < 1e-5

---- simd::tests::test_maxsim_cosine_vecs stdout ----

thread 'simd::tests::test_maxsim_cosine_vecs' (12500021) panicked at src/simd.rs:332:9:
assertion failed: (maxsim_cosine_vecs(&query, &doc) - 1.0).abs() < 1e-5

---- simd::tests::test_maxsim_vecs stdout ----

thread 'simd::tests::test_maxsim_vecs' (12500024) panicked at src/simd.rs:324:9:
assertion failed: (maxsim_vecs(&query, &doc) - 2.0).abs() < 1e-5

---- simd::proptests::cosine_self_is_one stdout ----

thread 'simd::proptests::cosine_self_is_one' (12499998) panicked at src/simd.rs:369:5:
Test aborted: Too many local rejects
	successes: 0
	local rejects: 65536
		65536 times at non-zero
	global rejects: 0



failures:
    colbert::proptests::duplicate_tokens_cluster
    colbert::proptests::pool_preserves_vector_mass
    colbert::proptests::pooling_idempotent_at_target
    colbert::tests::test_maxsim_with_pooled_tokens
    matryoshka::tests::test_refinement
    matryoshka::tests::test_refinement_with_alpha
    scoring::tests::test_dense_cosine
    scoring::tests::test_dense_dot
    scoring::tests::test_dense_rank
    scoring::tests::test_late_interaction_maxsim
    scoring::tests::test_token_scorer_rank_vecs
    scoring::tests::test_token_scorer_score_vecs
    simd::proptests::cosine_self_is_one
    simd::proptests::dot_simd_matches_portable
    simd::tests::test_cosine_basic
    simd::tests::test_dot_basic
    simd::tests::test_dot_mismatched_lengths
    simd::tests::test_dot_simd_vs_portable
    simd::tests::test_maxsim_basic
    simd::tests::test_maxsim_cosine_basic
    simd::tests::test_maxsim_cosine_vecs
    simd::tests::test_maxsim_vecs

test result: FAILED. 102 passed; 22 failed; 0 ignored; 0 measured; 0 filtered out; finished in 2.18s

error: test failed, to rerun pass `-p rank-refine --lib`

*** result: Failure(101)
